% ______________________________________________________________________________
%
% DVG001 -- Introduktion till Linux och små nätverk
%                              Inlämningsuppgift #3
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Author:   Jonas Sjöberg
%           tel12jsg@student.hig.se
%
% Date:     2016-03-15 -- 2016-03-TODO
%
% License:  Creative Commons Attribution 4.0 International (CC BY 4.0)
%           <http://creativecommons.org/licenses/by/4.0/legalcode>
%           See LICENSE.md for additional licensing information.
% ______________________________________________________________________________


\section{Del tre}


% ______________________________________________________________________________
\subsection{Skapa katalogstruktur}
Här ska rättigheter för användare demonstreras genom skapande av en uppsättning filer
och kataloger. Den katalogstruktur som efterfrågas visas i Tabell~\ref{table:tree}.

\begin{table}[]
  \centering
  \caption{Efterfrågad katalogstruktur}
  \label{table:tree}
  \begin{tabular}{@{}llll@{}}
  \toprule
          Sökväg        & Rättigheter                   & Ägare                    & Grupp                          \\ \midrule
  \texttt{/tmp/del3}    & \texttt{drwxr-xr-x}           & Användaren från del två  & Gruppen som användaren tillhör \\
  \texttt{/tmp/del3/a1} & \texttt{drwx-{}-{}-{}-{}-{}-} & \texttt{root}            & Gruppen som användaren tillhör \\
  \texttt{/tmp/del3/a2} & \texttt{-rwxr-{}-r-{}-}       &  Användaren från del två & \texttt{root}                  \\
  \texttt{/tmp/del3/a3} & \texttt{drwxr-{}-r-{}-}       &  Användaren från del två & Gruppen som användaren tillhör \\
  \texttt{/tmp/del3/a4} & \texttt{-rwxrwx-{}-{}-}       & \texttt{root}            & \texttt{root}                  \\\bottomrule
  \end{tabular}
\end{table}



Katalogen \texttt{/tmp/del3/a1} skapas enligt Programlistning~\ref{listing:part3-del3a1}.

\begin{listing}[H]
\shellcode{tex/part3-del3a1}
\caption{Skapandet av \texttt{/tmp/del3/a1}}
\label{listing:part3-del3a1}
\end{listing}


Filen \texttt{/tmp/del3/a2} skapas enligt Programlistning~\ref{listing:part3-del3a2}.

\begin{listing}[H]
\shellcode{tex/part3-del3a2}
\caption{Skapandet av \texttt{/tmp/del3/a2}}
\label{listing:part3-del3a2}
\end{listing}


Katalogen \texttt{/tmp/del3/a3} skapas enligt Programlistning~\ref{listing:part3-del3a3}.

\begin{listing}[H]
\shellcode{tex/part3-del3a3}
\caption{Skapandet av \texttt{/tmp/del3/a3}}
\label{listing:part3-del3a3}
\end{listing}


Filen \texttt{/tmp/del3/a4} skapas enligt Programlistning~\ref{listing:part3-del3a4}.

\begin{listing}[H]
\shellcode{tex/part3-del3a4}
\caption{Skapandet av \texttt{/tmp/del3/a4}}
\label{listing:part3-del3a4}
\end{listing}


% ______________________________________________________________________________
\subsubsection{Verifiering av skapade filer i \texttt{/tmp/del3}}
För att kontrollera att de skapade filerna och katalogerna har de egenskaper
som efterfrågats körs programmet i Programlistning~\ref{listing:part3-verify}.
Programmet loopar över både innehållet i katalogen \texttt{/tmp/del3} och
katalogen själv med en möjligen onödigt komplex parameter-expansion
\texttt{\{,*\}} som expanderas till katalogen och dess underkataloger.  Dessa
skickas som argument till \texttt{ls} vars utskrift slutligen kolumniseras med
\texttt{column}.

\begin{listing}[H]
\shellcode{tex/part3-verify.sh}
\caption{Verifiering av de kataloger och filer som skapats}
\label{listing:part3-verify}
\end{listing}

Resultatet i Programlistning~\ref{listing:part3-verify} matchar den
struktur som efterfrågas i Tabell~\ref{table:tree}.



% ______________________________________________________________________________
\subsection{Exekvering av kommandon}
För att skapa filer och kataloger med rättigheter används ett skript som visas
i Programlistning~\ref{listing:part3-setup}. Körning av skriptet visas i
Programlistning~\ref{listing:part3-setup-output}.

\begin{listing}[H]
\shellcode{tex/part3-setup.sh}
\caption{Skript som körs för att skapa filer och kataloger med särskilda rättigheter.}
\label{listing:part3-setup}
\end{listing}

\begin{listing}[H]
\shellcode{tex/part3-setup-output}
\caption{Körning av skriptet i Programlistning~\ref{listing:part3-setup}.}
\label{listing:part3-setup-output}
\end{listing}

%
% Förklara vad varje kommandorad gör och varför det händer, 
% samt vilken användare som utför delkommandon.
%
% Förklara felmeddelanden. 
%
% Katalogstrukturen redovisas lämpligen med kommandot `tree(1)` med växeln `-a`.


